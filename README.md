# AWS EC2 Dynamic Inventory for Ansible

This repository contains Python scripts and an Ansible playbook to dynamically generate Ansible inventory from AWS EC2 instances using **boto3**. It simplifies managing AWS EC2 hosts for Ansible automation.

## Files

### aws_ec2_inventory.py
- Generates a dynamic inventory of running EC2 instances.
- Assigns all hosts to a single group called `web`.
- Outputs JSON for Ansible dynamic inventory or writes a static `aws_inventory.ini` file.
- Uses default SSH user `ec2-user` and key path `~/.ssh/mousa.pem`.

### aws_group.py
- Similar to `aws_ec2_inventory.py` but groups hosts based on the EC2 tag `group`.
- Instances without a `group` tag are assigned to `ungrouped`.
- Writes a static inventory file `aws_inventory.ini`.

### aws_inventory.ini
- Example static inventory file generated by the scripts.
- Contains hosts with connection details (IP, SSH user, private key).

### playbook.yml
- Sample Ansible playbook that:
  - Runs on all hosts in the inventory.
  - Prints debug information including hostname, group names, and hosts in the first group.

## Requirements
- Python 3
- boto3 library (`pip install boto3`)
- AWS credentials configured with permission to describe EC2 instances
- Ansible installed

## Usage
1. Configure AWS credentials (via `~/.aws/credentials` or environment variables).
2. Update SSH user and private key path in scripts if necessary.
3. Run Ansible playbook with the dynamic inventory script:

```bash
ansible-playbook playbook.yml -i aws_ec2_inventory.py
# or
ansible-playbook playbook.yml -i aws_group.py
